<!doctype html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title></title>
    <script type="text/javascript" src="./beautify.js"></script>
    <script type="text/javascript" src="../src/index.js"></script>
</head>
<body>

    <p>
        <button id="convert">转化为json-schema</button>
    </p>

    <style>
        .container {
            font-size: 0;
        }
        #json {
            width: 50%;
            height: 500px;
            display: inline-block;
            box-sizing: border-box;
            font-size: 12px;
            vertical-align: top;
        }

        .result-wrap {
            width: 50%;
            display: inline-block;
            box-sizing: border-box;
            font-size: 12px;
            vertical-align: top;
        }
    </style>

    <div class="container">

        <textarea id="json">
            {
            "activityInfo": {
            "state": "process",
            "deadline": 2201,
            "remainDays": 9859,
            "needDays": 7056,
            "seasonNum": 4
            },
            "exchangeInfo": {
            "currentGroupState": "notBegin",
            "allOver": false,
            "currentGroupNum": 3536,
            "beginDate": 6781,
            "exchangeUrl": "5wn"
            },
            "participateInfo": {
            "finishedDays": 251,
            "getAdmit": true,
            "exchanged": true,
            "processLevel": 2301
            },
            "list": [1]
            }
        </textarea>

    <pre class="result-wrap">
        <code id="result">
        </code>
    </pre>



        <script>

            !(function(){

                var JSONToSchema = window.JSONToSchema;

                var jsonTextDOM = document.getElementById( 'json' );
                var resultDOM = document.getElementById( 'result' );


                document.getElementById( 'convert' ).addEventListener( 'click', function( e ){

                    debugger;
                    var json = jsonTextDOM.value;
                    try{
                        var data = JSON.parse( json );
                    }
                    catch( e ){
                        alert( '不是合法的JSON字符串' );
                    }

                    if( data ){
                        resultDOM.innerHTML = js_beautify( JSON.stringify( JSONToSchema( data )) );
                    }
                });

            })();

        </script>

    </div>

</body>
</html>